(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{19:function(e,t,a){},20:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),r=a(12),s=a.n(r),i=(a(19),a(20),a(3)),l=a(10),o=a.n(l),d=a(13),u=a(5),j=a(14),b=function(e,t){var a=function(e){for(var t=e.length,a=Math.ceil(t/10),n={},c=0,r=0;r<a;r++)n[r+1]=e.slice(c,c+10),c+=10;return n};switch(t.type){case"LOADING":return Object(i.a)(Object(i.a)({},e),{},{isLoading:!0});case"ERROR":return Object(i.a)(Object(i.a)({},e),{},{isError:!0,isLoading:!1,errorMsg:t.payload});case"SHOW_INPUT":return Object(i.a)(Object(i.a)({},e),{},{inputValue:t.payload});case"LOAD_USERS":var n=a(t.payload);return Object(i.a)(Object(i.a)({},e),{},{userList:t.payload,pagination:n});case"FILTER_USERS":var c=a(t.payload);return console.log("filteredPages",c),Object(i.a)(Object(i.a)({},e),{},{filteredList:t.payload,pagination:c,currPage:1});case"SET_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currPage:t.payload});case"REMOVE_ITEM":var r=e.userList.filter((function(e){return e.id!==t.payload}));return Object(i.a)(Object(i.a)({},e),{},{userList:r});case"EDIT_ITEM":var s=e.userList.filter((function(e){return e.id===t.payload}))[0];return Object(i.a)(Object(i.a)({},e),{},{editUser:s});case"UPDATE_USER":var l=t.payload,o=l.id,d=l.name,u=l.email,b=l.role;console.log("object",t.payload);var m=e.userList.map((function(e){return e.id===o?{id:o,name:d,email:u,role:b}:e}));return Object(i.a)(Object(i.a)({},e),{},{userList:m});case"LOAD_SELECTED":var O=[].concat(Object(j.a)(e.selectedUser),[t.payload]);return Object(i.a)(Object(i.a)({},e),{},{selectedUser:O});case"UNLOAD_SELECTED":var p=e.selectedUser.filter((function(e){return e!==t.payload}));return Object(i.a)(Object(i.a)({},e),{},{selectedUser:p});case"REMOVE_SELECTED":var h=e.userList.filter((function(t){return!e.selectedUser.includes(t.id)}));return console.log("removeSelected",h),Object(i.a)(Object(i.a)({},e),{},{userList:h,selectedUser:[],inputValue:""});default:throw new Error("no matching action type")}},m=a(1),O=c.a.createContext(),p={isLoading:!1,userList:[],filteredList:[],selectedUser:[],pagination:{},currPage:1,checkAll:!1,inputValue:"",isError:!1,errorMsg:"",editUser:{}};function h(e){var t=e.children,a=Object(n.useReducer)(b,p),c=Object(u.a)(a,2),r=c[0],s=c[1],l=function(){var e=Object(d.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(" https://geektrust.s3-ap-southeast-1.amazonaws.com/adminui-problem/members.json");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Something went wrong!");case 6:return e.next=8,t.json();case 8:return a=e.sent,s({type:"LOAD_USERS",payload:a}),s({type:"LOADING"}),e.abrupt("return",a);case 14:e.prev=14,e.t0=e.catch(0),s({type:"ERROR",payload:e.t0.message}),console.log("error",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){l()}),[]),Object(n.useEffect)((function(){s({type:"LOAD_USERS",payload:r.userList})}),[r.userList]);return Object(m.jsxs)(O.Provider,{value:Object(i.a)(Object(i.a)({},r),{},{handlePage:function(e){var t="",a=Object.keys(r.pagination);switch(a.includes(e)&&(t=e),e){case"next":var n=0;return console.log("state.currPage",a.length,r.currPage),n=r.currPage===a.length?1:r.currPage+1,void s({type:"SET_PAGE",payload:n});case"prev":var c=0;return c=1===r.currPage?a.length:r.currPage-1,void s({type:"SET_PAGE",payload:c});case"first":return console.log("first",e),void s({type:"SET_PAGE",payload:1});case"last":return void s({type:"SET_PAGE",payload:a.length});case t:return void s({type:"SET_PAGE",payload:Number(e)});default:return}},removeItem:function(e){console.log("id",e),s({type:"REMOVE_ITEM",payload:String(e)})},editItem:function(e){console.log("id",e),s({type:"EDIT_ITEM",payload:String(e)})},removeSelected:function(){s({type:"REMOVE_SELECTED"});var e=document.getElementById("checkBox-all");e.checked&&(e.checked=!1)},loadSelectedUsers:function(e,t){s(t?{type:"LOAD_SELECTED",payload:e}:{type:"UNLOAD_SELECTED",payload:e})},selectAllUsersPage:function(e){},filterUsers:function(e){s({type:"FILTER_USERS",payload:e})},setInputValue:function(e){s({type:"SHOW_INPUT",payload:e})},userEdit:function(e){console.log("user",e),s({type:"UPDATE_USER",payload:e})}}),children:[" ",t," "]})}var x=function(){return Object(n.useContext)(O)};var f=function(){var e=x(),t=e.userList,a=e.filterUsers,n=e.inputValue,c=e.setInputValue;return Object(m.jsxs)("form",{className:"admin-form",onSubmit:function(e){return e.preventDefault()},children:[Object(m.jsx)("h2",{children:" Admin UI "})," ",Object(m.jsx)("div",{className:"form-control",children:Object(m.jsx)("input",{type:"text",className:"admin-input",value:n,onChange:function(e){var n=e.target.value,r=t.filter((function(e){var t=e.name.toLocaleLowerCase(),a=e.email.toLocaleLowerCase(),c=e.role.toLocaleLowerCase();return t.startsWith(n)||a.startsWith(n)||c.startsWith(n)}));console.log("filteredList",r),a(r),c(n)},placeholder:"Search by name, email or role"})})," "]})},v=a(8),g=a(11);a(23);var E=function(e){var t=x(),a=t.handlePage,n=t.removeItem,c=t.removeSelected,r=t.editItem,s=e.id,i=e.children,l=e.text,o="btn ".concat(e.className);return Object(m.jsx)("button",{type:"button",className:o,id:s,"data-text":l,onClick:function(e){var t=e.currentTarget.dataset.text,s=e.currentTarget.id;(a(t),["edit","delete"].includes(t))&&("edit"===t?(console.log("currEl",t,s),document.querySelector(".modal-outer").classList.add("open"),r(s)):"delete"===t&&n(s));"delete-selected"===t&&(console.log("clicking Delete"),c())},children:i})};var y=function(e){var t=e.id,a=e.name,n=e.email,c=e.role,r=x().loadSelectedUsers;return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("input",{type:"checkbox",value:t,id:"chckBox-".concat(t),onChange:function(e){r(e.currentTarget.value,e.currentTarget.checked)}})}),Object(m.jsxs)("td",{children:[" ",a," "]})," ",Object(m.jsxs)("td",{children:[" ",n," "]})," ",Object(m.jsxs)("td",{children:[" ",c," "]}),Object(m.jsxs)("td",{children:[Object(m.jsx)(E,{className:"edit-btn icons",text:"edit",id:t,children:Object(m.jsx)(g.a,{})}),Object(m.jsx)(E,{className:"icons delete-icon",text:"delete",id:t,children:Object(m.jsx)(g.b,{})})]})]})};a(24);var S=function(){var e=x(),t=e.pagination,a=e.currPage,n=e.loadSelectedUsers;return Object(m.jsx)("div",{children:Object(m.jsxs)("table",{className:"user-table",children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:Object(m.jsx)("input",{type:"checkbox",id:"checkBox-all",value:"all",onChange:function(e){var c,r=e.currentTarget.checked,s=Object(v.a)(t[a]);try{for(s.s();!(c=s.n()).done;){var i=c.value,l=document.getElementById("chckBox-".concat(i.id));r?(l.checked=!0,n(l.value,l.checked)):(l.checked=!1,n(l.value,l.checked))}}catch(o){s.e(o)}finally{s.f()}}})}),Object(m.jsx)("th",{children:"Name"}),Object(m.jsx)("th",{children:"Email"}),Object(m.jsx)("th",{children:"Role"}),Object(m.jsx)("th",{children:"Actions"})]})}),Object(m.jsx)("tbody",{children:t[a].map((function(e){return Object(m.jsx)(y,{id:e.id,name:e.name,email:e.email,role:e.role},e.id)}))})]})})},L=(a(25),function(e){var t=x().userEdit,a=e.item,c=a.id,r=a.name,s=a.email,i=a.role,l=Object(n.useState)(""),o=Object(u.a)(l,2),d=o[0],j=o[1],b=Object(n.useState)(""),O=Object(u.a)(b,2),p=O[0],h=O[1],f=Object(n.useState)(""),g=Object(u.a)(f,2),E=g[0],y=g[1],S=function(e){console.log("e",e.target.name);var t=e.target.value;"inpName"===e.target.name&&j(t),"inpEmail"===e.target.name&&h(t),"inpRole"===e.target.name&&y(t)},L=function(){document.querySelector(".modal-outer").classList.remove("open")};return Object(n.useEffect)((function(){h(s),j(r),y(i)}),[s,r,i]),Object(m.jsx)("div",{className:"modal-outer",onClick:function(e){!e.target.closest(".modal-inner")&&L()},children:Object(m.jsx)("div",{className:"modal-inner",children:Object(m.jsx)("form",{className:"edit-form",onSubmit:function(e){var a={id:c,name:"",email:"",role:""};e.preventDefault(),console.log("e.target",e.target);var n,r=document.querySelector(".edit-form").elements,s=Object(v.a)(r);try{for(s.s();!(n=s.n()).done;){var i=n.value;"inpName"===i.name&&(a.name=i.value),"inpEmail"===i.name&&(a.email=i.value),"inpRole"===i.name&&(a.role=i.value)}}catch(l){s.e(l)}finally{s.f()}t(a),L()},children:Object(m.jsxs)("div",{className:"form-control edit-control",children:[Object(m.jsx)("label",{htmlFor:"inpName",children:"Name "}),Object(m.jsx)("input",{type:"text",className:"admin-input",value:d,name:"inpName",onChange:S}),Object(m.jsx)("label",{htmlFor:"inpEmail",children:"Email "}),Object(m.jsx)("input",{type:"text",className:"admin-input",value:p,name:"inpEmail",onChange:S}),Object(m.jsx)("label",{htmlFor:"inpRole",children:"Role "}),Object(m.jsx)("input",{type:"text",className:"admin-input",value:E,name:"inpRole",onChange:S}),Object(m.jsx)("button",{className:"btn edit-form-btn submit-btn",children:" Submit"})]})})})})}),N=a(7);var U=function(){var e=x().pagination,t=Object.keys(e).map((function(e){return Object(m.jsx)(E,{className:"page-btn",text:e,children:e},e)}));return Object(m.jsxs)("div",{className:"btn-container",children:[Object(m.jsx)(E,{className:"delete-btn",text:"delete-selected",id:"deleteId",children:"Delete Selectedtext"}),Object(m.jsxs)("div",{className:"page-container",children:[Object(m.jsx)(E,{className:"first-btn",text:"first",children:Object(m.jsx)(N.a,{})}),Object(m.jsx)(E,{className:"prev-btn",text:"prev",children:Object(m.jsx)(N.d,{})}),t,Object(m.jsx)(E,{className:"next-btn",text:"next",children:Object(m.jsx)(N.c,{})}),Object(m.jsx)(E,{className:"last-btn",text:"last",children:Object(m.jsx)(N.b,{})})]})]})};var T=function(){var e=x(),t=e.isLoading,a=e.pagination,n=e.isError,c=e.errorMsg,r=e.editUser,s="";return t&&(s=0===Object.keys(a).length?Object(m.jsx)("h3",{className:"empty-list",children:"No Users to list down..."}):""),n&&(s=Object(m.jsxs)("h3",{className:"empty-list",children:[" ",c," "]})),t||n||(s=Object(m.jsx)("h2",{className:"empty-list",children:"Page is loading..."})),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"section-center",children:[Object(m.jsx)(f,{}),s,!s&&Object(m.jsx)(S,{}),!s&&Object(m.jsx)(U,{}),Object(m.jsx)(L,{item:r})]})})};s.a.render(Object(m.jsxs)(c.a.StrictMode,{children:[Object(m.jsx)(h,{children:Object(m.jsx)(T,{})})," "]}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.41927152.chunk.js.map