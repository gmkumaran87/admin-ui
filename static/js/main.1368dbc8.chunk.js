(this["webpackJsonpadmin-ui"]=this["webpackJsonpadmin-ui"]||[]).push([[0],{18:function(e,t,c){},19:function(e,t,c){},22:function(e,t,c){},23:function(e,t,c){},24:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),a=c(11),s=c.n(a),i=(c(18),c(7)),l=(c(19),c(1));var o=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(l.jsxs)("form",{className:"admin-form",onSubmit:function(e){return e.preventDefault()},children:[Object(l.jsx)("h2",{children:"Admin UI"}),Object(l.jsx)("div",{className:"form-control",children:Object(l.jsx)("input",{type:"text",className:"admin-input",value:c,onChange:function(e){var t=e.target.value;r(t)},placeholder:"Search by name, email or role"})})]})},d=c(3),j=c(9),u=c.n(j),b=c(12),O=c(13),h=function(e,t){switch(t.type){case"LOADING":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0});case"LOAD_USERS":var c=function(e){for(var t=e.length,c=Math.ceil(t/10),n={},r=0,a=0;a<c;a++)n[a+1]=e.slice(r,r+10),r+=10;return n}(t.payload);return Object(d.a)(Object(d.a)({},e),{},{userList:t.payload,pagination:c});case"SET_PAGE":return Object(d.a)(Object(d.a)({},e),{},{currPage:t.payload});case"REMOVE_ITEM":console.log("action.payload",typeof t.payload,e.userList);var n=e.userList.filter((function(e){return e.id!==t.payload}));return Object(d.a)(Object(d.a)({},e),{},{userList:n});case"LOAD_SELECTED":var r=[].concat(Object(O.a)(e.selectedUser),[t.payload]);return console.log("newSelected",r),Object(d.a)(Object(d.a)({},e),{},{selectedUser:r});case"UNLOAD_SELECTED":var a=e.selectedUser.filter((function(e){return e!==t.payload}));return console.log("unSelect",a),Object(d.a)(Object(d.a)({},e),{},{selectedUser:a});case"REMOVE_SELECTED":console.log("state.selectedUser",e.selectedUser);var s=e.userList.filter((function(t){return!e.selectedUser.includes(t.id)}));return console.log("removeSelected",s),Object(d.a)(Object(d.a)({},e),{},{userList:s,selectedUser:[]});default:throw new Error("no matching action type")}},x=r.a.createContext(),p={isLoading:!1,userList:[],filteredList:{},selectedUser:[],pagination:{},currPage:1};function f(e){var t=e.children,c=Object(n.useReducer)(h,p),r=Object(i.a)(c,2),a=r[0],s=r[1],o=function(){var e=Object(b.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(" https://geektrust.s3-ap-southeast-1.amazonaws.com/adminui-problem/members.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,s({type:"LOAD_USERS",payload:c}),s({type:"LOADING"}),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){o()}),[]),Object(n.useEffect)((function(){s({type:"LOAD_USERS",payload:a.userList})}),[a.userList]);return Object(l.jsxs)(x.Provider,{value:Object(d.a)(Object(d.a)({},a),{},{handlePage:function(e){var t="",c=Object.keys(a.pagination);switch(c.includes(e)&&(t=e),e){case"next":var n=0;return console.log("state.currPage",c.length,a.currPage),n=a.currPage===c.length?1:a.currPage+1,void s({type:"SET_PAGE",payload:n});case"prev":var r=0;return r=1===a.currPage?c.length:a.currPage-1,void s({type:"SET_PAGE",payload:r});case"first":return console.log("first",e),void s({type:"SET_PAGE",payload:1});case"last":return void s({type:"SET_PAGE",payload:c.length});case t:return void s({type:"SET_PAGE",payload:Number(e)});default:return}},removeItem:function(e){console.log("id",e),s({type:"REMOVE_ITEM",payload:String(e)})},removeSelected:function(){s({type:"REMOVE_SELECTED"})},loadSelectedUsers:function(e,t){console.log("list",e,t),s(t?{type:"LOAD_SELECTED",payload:e}:{type:"UNLOAD_SELECTED",payload:e})}}),children:[t," "]})}var m=function(){return Object(n.useContext)(x)},g=c(10);c(22);var v=function(e){var t=m(),c=t.handlePage,n=t.removeItem,r=t.removeSelected,a=e.id,s=e.children,i=e.text,o="btn ".concat(e.className);return Object(l.jsx)("button",{type:"button",className:o,id:a,"data-text":i,onClick:function(e){var t=e.currentTarget.dataset.text,a=e.currentTarget.id;c(t),["edit","delete"].includes(t)&&n(a),"delete-selected"===t&&(console.log("clicking Delete"),r())},children:s})};var E=function(e){var t=e.id,c=e.name,n=e.email,r=e.role,a=m().loadSelectedUsers;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("input",{type:"checkbox",value:t,id:t,onChange:function(e){a(e.currentTarget.id,e.currentTarget.checked)}})}),Object(l.jsxs)("td",{children:[" ",c," "]})," ",Object(l.jsxs)("td",{children:[" ",n," "]})," ",Object(l.jsxs)("td",{children:[" ",r," "]}),Object(l.jsxs)("td",{children:[Object(l.jsx)(v,{className:"edit-btn icons",text:"edit",id:t,children:Object(l.jsx)(g.a,{})}),Object(l.jsx)(v,{className:"icons delete-icon",text:"delete",id:t,children:Object(l.jsx)(g.b,{})})]})]})};c(23);var y=function(){var e=m(),t=e.pagination,c=e.currPage;return Object(l.jsx)("div",{children:Object(l.jsxs)("table",{className:"user-table",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:Object(l.jsx)("input",{type:"checkbox",value:"all",onChange:function(e){console.log("object",e.currentTarget)}})}),Object(l.jsx)("th",{children:"Name"}),Object(l.jsx)("th",{children:"Email"}),Object(l.jsx)("th",{children:"Role"}),Object(l.jsx)("th",{children:"Actions"})]})}),Object(l.jsx)("tbody",{children:t[c].map((function(e){return Object(l.jsx)(E,{id:e.id,name:e.name,email:e.email,role:e.role},e.id)}))})]})})},S=c(5);var L=function(){var e=m().pagination,t=Object.keys(e).map((function(e){return Object(l.jsx)(v,{className:"page-btn",text:e,children:e},e)}));return Object(l.jsxs)("div",{className:"btn-container",children:[Object(l.jsx)(v,{className:"delete-btn",text:"delete-selected",id:"deleteId",children:"Delete Selectedtext"}),Object(l.jsxs)("div",{className:"page-container",children:[Object(l.jsx)(v,{className:"first-btn",text:"first",children:Object(l.jsx)(S.a,{})}),Object(l.jsx)(v,{className:"prev-btn",text:"prev",children:Object(l.jsx)(S.d,{})}),t,Object(l.jsx)(v,{className:"next-btn",text:"next",children:Object(l.jsx)(S.c,{})}),Object(l.jsx)(v,{className:"last-btn",text:"last",children:Object(l.jsx)(S.b,{})})]})]})};var N=function(){var e=m().isLoading;return Object(l.jsxs)(l.Fragment,{children:[!e&&Object(l.jsx)("h2",{children:"Page is loading..."}),e&&Object(l.jsxs)("div",{className:"section-center",children:[Object(l.jsx)(o,{}),Object(l.jsx)(y,{}),Object(l.jsx)(L,{})]})]})};s.a.render(Object(l.jsxs)(r.a.StrictMode,{children:[Object(l.jsx)(f,{children:Object(l.jsx)(N,{})})," "]}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.1368dbc8.chunk.js.map